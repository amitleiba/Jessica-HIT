<div class="control-panel-container">
  <div class="control-grid">
    <!-- D-pad with Start/Stop in center -->
    <div class="d-pad-container">
      <!-- Up Button -->
      @if (showUp) {
      <app-circular-button icon="pi pi-arrow-up" size="medium" severity="secondary" [isActive]="isDirectionActive('up')"
        (buttonClick)="onDirectionClick('up')" class="d-pad-btn up-btn"></app-circular-button>
      }

      <!-- Middle Row: Left, Start/Stop, Right -->
      <div class="middle-row">
        @if (showLeft) {
        <app-circular-button icon="pi pi-arrow-left" size="medium" severity="secondary"
          [isActive]="isDirectionActive('left')" (buttonClick)="onDirectionClick('left')"
          class="d-pad-btn left-btn"></app-circular-button>
        }

        <!-- Start/Stop Button in Center (Circular) -->
        @if (onStart && !isRunning) {
        <app-circular-button icon="pi pi-play" size="medium" severity="success" (buttonClick)="onStartStopClick()"
          class="d-pad-btn center-btn"></app-circular-button>
        } @if (onStop && isRunning) {
        <app-circular-button icon="pi pi-stop" size="medium" severity="danger" (buttonClick)="onStartStopClick()"
          class="d-pad-btn center-btn"></app-circular-button>
        } @if (showRight) {
        <app-circular-button icon="pi pi-arrow-right" size="medium" severity="secondary"
          [isActive]="isDirectionActive('right')" (buttonClick)="onDirectionClick('right')"
          class="d-pad-btn right-btn"></app-circular-button>
        }
      </div>

      <!-- Down Button -->
      @if (showDown) {
      <app-circular-button icon="pi pi-arrow-down" size="medium" severity="secondary"
        [isActive]="isDirectionActive('down')" (buttonClick)="onDirectionClick('down')"
        class="d-pad-btn down-btn"></app-circular-button>
      }
    </div>
  </div>
</div>